# Copy this file to .env.local and fill in your own secrets.
# Never commit .env.local to source control.
#
# ENVIRONMENT VARIABLE REQUIREMENTS
# =================================
# [REQUIRED] - App will not start without these
# [STRIPE]   - Required for subscription/billing features
# [OPTIONAL] - App works without these but features may be limited
#
# PRODUCTION NOTES
# ================
# For Vercel: Set all [REQUIRED] and [STRIPE] vars in Vercel dashboard
# For Convex: Must also set [STRIPE] vars on production Convex deployment:
#   CONVEX_DEPLOYMENT="prod:your-slug" npx convex env set STRIPE_SECRET_KEY
#
# Quality Gate: `./scripts/validate-env.sh --prod` verifies both local and prod

# Clerk [REQUIRED]
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_clerk_key
CLERK_SECRET_KEY=sk_test_your_clerk_secret
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
CLERK_WEBHOOK_SECRET=whsec_your_clerk_webhook_secret
CLERK_JWT_ISSUER_DOMAIN=https://your-instance.clerk.accounts.dev

# Convex [REQUIRED]
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
CONVEX_DEPLOYMENT=dev:your-convex-slug
# Optional: explicit HTTP URL for Clerk webhooks if different from Convex deployment slug
CONVEX_DEPLOYMENT_URL=https://your-deployment.convex.cloud

# Vercel Blob [OPTIONAL] - Required for cover image uploads
BLOB_READ_WRITE_TOKEN=vercel_blob_your_token

# Stripe [STRIPE] - Required for subscription features
# Get these from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
# Webhook secret from https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret
# Price IDs from Stripe dashboard (create product "bibliomnomnom Pro" with two prices)
STRIPE_PRICE_MONTHLY=price_your_monthly_price_id
STRIPE_PRICE_ANNUAL=price_your_annual_price_id

# Convex Webhook Security [STRIPE] - Required for Stripe webhook handling
# Generate with: openssl rand -hex 32
# Must also be set in Convex dashboard as CONVEX_WEBHOOK_TOKEN
CONVEX_WEBHOOK_TOKEN=

# Sentry [OPTIONAL] - Error tracking and monitoring
# Get DSN from https://sentry.io/settings/projects/{project}/keys/
# For Vercel Integration: Use the Vercel Integration to auto-configure
NEXT_PUBLIC_SENTRY_DSN=

# PostHog [OPTIONAL] - Product analytics
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# AI Features [OPTIONAL]
OPENROUTER_API_KEY=
# Optional: defaults to google/gemini-3-pro-preview
OPENROUTER_IMPORT_MODEL=
# Optional: verifier model (if set, runs extra pass to detect missing books)
OPENROUTER_IMPORT_VERIFIER_MODEL=
# Optional: OCR model for quote capture, defaults to google/gemini-2.5-flash
OPENROUTER_OCR_MODEL=
# Optional: synthesis model for listening sessions
OPENROUTER_LISTENING_MODEL=

# Speech-to-text providers for listening sessions [OPTIONAL]
DEEPGRAM_API_KEY=
# Optional: defaults to nova-3
DEEPGRAM_STT_MODEL=
ELEVENLABS_API_KEY=
# Optional: defaults to scribe_v2
ELEVENLABS_STT_MODEL=

# Google Books API [OPTIONAL] - For automatic cover fetching
# Get key from https://console.cloud.google.com/apis/credentials
GOOGLE_BOOKS_API_KEY=

# Import feature [OPTIONAL]
NEXT_PUBLIC_IMPORT_ENABLED=true

# Cover Backfill [OPTIONAL] - Enable automatic cover fetching (defaults to true)
NEXT_PUBLIC_COVER_BACKFILL_ENABLED=true

# Application URL [OPTIONAL] - For Stripe redirects
# Set in production, defaults to localhost:3000 or VERCEL_URL
NEXT_PUBLIC_APP_URL=

# Site URL [OPTIONAL] - For RSS feeds and public links
# Defaults to https://bibliomnomnom.com in production
NEXT_PUBLIC_SITE_URL=

# Logging [OPTIONAL] - Log level (debug, info, warn, error)
# Defaults to "info"
LOG_LEVEL=info
