### Technical Overview: /e2e Directory

The `/e2e` directory contains the end-to-end testing suite for the bibliomnomnom application. Built using the Playwright framework, the suite is designed to validate critical user paths, UI integrity, and the enforcement of security boundaries across the application's front-end.

#### Architecture and Purpose

The testing architecture follows a modular, feature-based structure where individual specification files correspond to specific application domains. The suite utilizes a black-box testing methodology, interacting with the application via the DOM to verify that the integrated system—including frontend components, routing middleware, and third-party services—functions as expected from the user's perspective.

#### Key File Roles

- **`auth.spec.ts`**: Validates identity and access management flows. It specifically tests the integration with the Clerk authentication provider by verifying redirects to `/sign-in` and `/sign-up`. It also ensures that middleware-level route protection is active, confirming that unauthenticated attempts to access the `/library` or non-existent routes are correctly intercepted.
- **`home.spec.ts`**: Ensures the integrity of the landing page. It verifies core branding elements, accessibility landmarks (such as navigation and footer roles), and the visibility of primary calls-to-action (CTAs) like the "Get Started" link.
- **`subscription.spec.ts`**: Manages complex UI logic related to the pricing and subscription model. It validates the stateful toggle between monthly and annual billing cycles, ensures the correct rendering of feature lists and FAQs, and verifies that subscription CTAs properly route unauthenticated users into the authentication funnel.

#### Dependencies and Key Considerations

- **Playwright Library**: The suite is entirely dependent on `@playwright/test` for browser orchestration, assertions, and test runner capabilities.
- **Clerk Authentication**: The authentication tests are coupled with Clerk’s default URL patterns and component behaviors. Changes to the Clerk environment or middleware configuration will directly affect these tests.
- **String-Heavy Selectors**: Many tests rely on specific text content (e.g., "$129", "2 months free", "misty step") and ARIA roles for element location. This makes the suite sensitive to changes in marketing copy, pricing values, or UI localization.
- **Middleware Assumptions**: The suite assumes the presence of global middleware that enforces authentication across the application, as evidenced by the tests for unknown routes and protected page redirects.
