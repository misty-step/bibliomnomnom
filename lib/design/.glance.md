The `/lib/design` directory serves as the foundation for the application's visual system, providing a centralized, type-safe repository for design primitives. The architecture follows a "Single Source of Truth" pattern where design decisions are codified into a structured format and then projected into both TypeScript constants and CSS variable mappings.

### Architecture and Key Roles

The directory's primary role is to bridge the gap between design specifications and implementation. The current architecture relies on a generated-code pattern to ensure consistency across the codebase.

- **`tokens.generated.ts`**: This file is the core of the design system. It is auto-generated from a `design-tokens.json` source and contains the exhaustive definitions for the application's visual language. It exports two primary structures:
  - **`designTokens`**: A constant object containing raw values for colors (canvas, text, accent, decorative, and status), typography stacks, spacing scales, border radii, elevations, and motion curves. It includes complex assets like inline SVG noise textures.
  - **`tokenVars`**: A mirror object that maps the same keys to CSS custom properties (e.g., `var(--color-accent-ember)`). This allows developers to use the design system in CSS-in-JS or inline styles while maintaining a link to the runtime CSS variable environment.
  - **Type Definitions**: It exports `DesignTokens` and `TokenVarsMap` types, providing strict IntelliSense and ensuring that components cannot consume undefined or non-standard design values.

### Key Functional Categories

- **Color System**: Implements a semantic palette divided into functional layers such as `canvas` (backgrounds), `ink` (typography), and `line` (borders), alongside decorative and status-based accents.
- **Typography**: Defines font stacks for `display`, `sans`, and `mono` variants, prioritizing high-quality typefaces like "Playfair Display" and "Geist" with standard system fallbacks.
- **Motion**: Standardizes transition timings and easing functions (e.g., `cubic-bezier`) to ensure consistent interaction feel across the UI.

### Important Dependencies and Gotchas

- **Source Dependency**: This directory is dependent on an external `design-tokens.json` file. Because `tokens.generated.ts` is auto-generated, any manual modifications to this file will be lost during the next build or generation cycle.
- **CSS Variable Runtime**: The `tokenVars` export relies on the existence of corresponding CSS custom properties defined in the global scope. If the underlying CSS variables are not injected into the document root, the `tokenVars` references will fail to resolve visually.
- **Font Dependencies**: The typography tokens assume that specific web fonts (e.g., "Playfair Display", "Geist", "JetBrains Mono") are correctly loaded via `@font-face` or a font provider; otherwise, the system will fall back to generic system stacks.
- **Type Safety**: The use of `as const` and the `TokenVars<T>` recursive type mapping ensures that the object structure is immutable and that the CSS variable mappings exactly match the structure of the raw tokens.
