This directory serves as the unit testing suite for the system's health monitoring utilities, specifically focusing on the validation of external service probes. The architecture utilizes Vitest to perform isolated testing of network-dependent logic by mocking global fetch calls and manipulating time-based execution.

### Architecture and Key File Roles

The primary component, `probes.test.ts`, validates the reliability and accuracy of health checks for critical infrastructure providers (specifically Convex and Clerk). It ensures the probing logic correctly handles several state transitions:

- **Initialization and Configuration:** Verifies that missing environment variables or URLs result in an "unknown" status rather than a failure.
- **Response Handling:** Validates that HTTP 200 responses are mapped to "up" statuses with calculated latency, while non-200 responses are correctly identified as "down" with specific error codes (e.g., `http-503`).
- **Timeout Logic:** Uses Vitest's fake timers to simulate network hangs, ensuring the probes respect defined timeout thresholds and utilize `AbortController` signals to terminate stalled requests.
- **Service-Specific Logic:** Confirms that the Clerk probe correctly targets the `.well-known/jwks.json` endpoint to verify authentication service availability.

### Dependencies and Technical Constraints

- **Vitest:** The suite relies heavily on `vi.useFakeTimers` and `vi.advanceTimersByTime` to test asynchronous timeout behavior without introducing real-world delays.
- **Fetch Mocking:** The tests perform manual overrides of `global.fetch`. This requires strict lifecycle management via `beforeEach` and `afterEach` to restore the original fetch implementation and reset mocks, preventing state leakage between test cases.
- **DOMException/AbortError:** The timeout verification mimics the behavior of the Web API's `AbortSignal`, requiring the simulation of `AbortError` within the mocked promise rejection to trigger the internal error-handling logic of the probes.
