This directory implements the subscription management and pricing interface for the application. It functions as a state-driven client-side route that handles plan selection, feature communication, and integration with Stripe-based billing workflows.

### Architecture and Logic

The directory follows a pattern where the UI is a direct reflection of the user's current subscription lifecycle. The architecture relies on a centralized state object—provided by the `useSubscriptionState` hook—to determine which messaging, pricing options, and action buttons are visible.

The logic is divided into three functional areas:

1.  **State-Aware Content Mapping**: Helper functions (`getFaqs`, `getHeroContent`) filter and return data based on the user's status (e.g., `trialing`, `trial_expired`, `active`).
2.  **Subscription Actions**: The `PricingCTA` and `BottomCTA` components encapsulate the logic for interacting with backend billing endpoints. They differentiate between starting a new checkout flow and opening the Stripe Customer Portal for existing members.
3.  **Billing Configuration**: A local state toggle allows users to switch between monthly and annual pricing, with logic to automatically apply "free month" incentives for annual commitments.

### Key File Roles

- **`page.tsx`**: The primary entry point and layout definition. It manages the billing frequency state and orchestrates the rendering of the feature grid, FAQ accordion, and the pricing surface. It handles the transition between unauthenticated marketing views and authenticated account management views.

### Dependencies and Data Flow

- **`useSubscriptionState`**: This is the critical dependency for data flow. It provides the `state`, `daysRemaining`, and `isUrgent` flags that drive the conditional rendering logic throughout the page.
- **Stripe Integration**: The component depends on two specific API routes: `/api/stripe/checkout` for processing new subscriptions and `/api/stripe/portal` for managing existing ones.
- **UI Components**: Utilizes a shared `Surface` component for elevated containers and `lucide-react` for feature iconography.
- **Toast System**: Uses a `useToast` hook for providing feedback during asynchronous checkout or portal redirection failures.

### Important Gotchas

- **Conditional FAQ Visibility**: FAQs are not static; they are filtered based on the user's authentication and subscription status to ensure relevance (e.g., hiding "Do I need a credit card?" for users who are already trialing).
- **Checkout Logic**: The "Annual" toggle is programmatically hidden for users with an `active` state to prevent plan switching conflicts within this specific view, directing them instead to the Stripe Portal.
- **Hydration and Loading**: The UI includes specific "loading" states for the CTA buttons to prevent layout shifts or double-submissions while the subscription status is being resolved or while external redirect URLs are being fetched.
