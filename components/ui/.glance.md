This directory serves as the foundation of the projectâ€™s design system, containing a collection of reusable, low-level UI primitives. The architecture follows a "headless-first" approach, where functional logic and accessibility are handled by established libraries, while visual styling is applied locally using Tailwind CSS and `class-variance-authority` (CVA). Many components are polymorphic, utilizing the `asChild` pattern from Radix UI or a custom `as` prop to allow for flexible DOM structures.

### Key File Roles

- **Button.tsx**: Implements a highly configurable action component with support for multiple variants (primary, ghost, destructive) and sizes. It uses the `Slot` primitive to allow for element polymorphism and defaults to `type="button"` to prevent accidental form submissions.
- **Surface.tsx**: A specialized container component that abstracts layout and depth. It manages elevation (shadows), padding, and interactive states through CSS variables and data attributes (`data-surface-elevation`).
- **SideSheet.tsx & Popover.tsx**: Built using `@headlessui/react`, these files provide slide-over panels and floating overlays. `SideSheet` includes built-in transition logic for backdrop blurs and slide animations.
- **toast.tsx & toaster.tsx**: Implements a notification system using `@radix-ui/react-toast`. `toaster.tsx` acts as the manager that maps over active toast states provided by a custom hook to render the visual stack.
- **alert-dialog.tsx, dialog.tsx, & dropdown-menu.tsx**: These files wrap Radix UI primitives to provide accessible modal overlays and menus. They utilize `React.forwardRef` extensively to ensure compatibility with third-party positioning and animation libraries.
- **input.tsx**: A standardized text input that integrates `React.useId` to automatically handle accessible label associations if a manual ID is not provided.

### Dependencies and Integration

- **Radix UI / Headless UI**: The core logic for accessibility, focus management, and ARIA compliance is delegated to these libraries.
- **Class Variance Authority (CVA)**: Centralizes the mapping of component props to Tailwind CSS utility classes, ensuring type-safe variant management.
- **Lucide React**: Provides the iconography used across close buttons, chevrons, and status indicators.
- **Tailwind Merge (`cn`)**: A utility used in every component to safely merge class names and resolve utility conflicts.

### Technical Gotchas

- **Mixed Primitives**: The library utilizes both Radix UI and Headless UI. Developers must ensure that transition patterns (Radix's CSS-data-state vs. Headless UI's `Transition` component) are handled according to the specific primitive used in the file.
- **Button Type Defaulting**: The `Button` component explicitly overrides the browser's default `submit` behavior by setting `type="button"` unless otherwise specified, which may impact standard HTML form behavior.
- **Popover Click Capture**: The `PopoverContent` component implements a `onClickCapture` handler that specifically searches for internal buttons to trigger the `close()` function, a custom behavior for menu-like interactions.
- **Design Token Reliance**: The styling relies heavily on custom CSS variables (e.g., `--radius-md`, `--canvas-bone`, `--line-ghost`). If the global CSS theme is not loaded, components will lack significant structural and color styling.
- **Polymorphic Ref Typing**: Components like `Surface` use complex TypeScript generics to maintain type safety when the underlying HTML element is changed via the `as` prop. Moving or refactoring these requires careful attention to the `SurfaceComponent` type definition.
