# Grooming Plan — 2026-02-23

## Session Summary

Full audit and overhaul — target: pristine backlog.

## Themes Explored

All 4 themes explored. All directions locked.

| Theme                 | Direction                                                                          |
| --------------------- | ---------------------------------------------------------------------------------- |
| Voice Notes Core Loop | Synthesis review, first-use flow, fallback logging, profile feedback loop          |
| Technical Foundation  | API route tests, telemetry reliability, session completion safety                  |
| Tracking UX Momentum  | Momentum signals on tiles, want-to-read curation, public profile currently-reading |
| Launch Readiness      | Demo mode, onboarding, sharing button, Stripe validation, analytics funnel, SEO    |

## Issues Created (14 new)

| #    | Title                                                                  | Priority | Effort | Theme       |
| ---- | ---------------------------------------------------------------------- | -------- | ------ | ----------- |
| #212 | Log STT fallback provider success in gateway                           | p1       | s      | Voice Notes |
| #213 | Voice notes first-use guided flow on book detail                       | p2       | m      | Voice Notes |
| #214 | Add API route test coverage for listening session pipeline             | p1       | l      | Foundation  |
| #215 | Fix silently-swallowed telemetry and session-fail mutations            | p2       | s      | Foundation  |
| #216 | Add session completion integration test with partial failure injection | p2       | s      | Foundation  |
| #217 | Add reading momentum signals to currently-reading book tiles           | p2       | m      | Tracking    |
| #218 | Want-to-read curation tools: aging signals and bulk actions            | p2       | m      | Tracking    |
| #219 | Show currently-reading books on public reader profiles                 | p2       | s      | Tracking    |
| #220 | Demo/preview mode for unauthenticated visitors                         | p2       | m      | Launch      |
| #221 | Post-signup onboarding flow                                            | p2       | m      | Launch      |
| #222 | Profile sharing button + short URL                                     | p2       | s      | Launch      |
| #223 | Automate Stripe webhook secret validation in CI and pre-push           | p1       | s      | Launch      |
| #224 | Instrument analytics funnel for signup-to-subscribe conversion         | p2       | s      | Launch      |
| #225 | Add robots.txt and sitemap for public profile pages                    | p3       | s      | Launch      |

## Hygiene Actions

- Closed duplicates: #176 (dup of #177), #197 (dup of #192)
- Closed stale launch items: #91, #92, #93
- Moved to later: #89 (Stripe launch item)
- Added canonical labels to 12 unlabeled issues
- Removed legacy labels from ~15 issues
- Added milestones to ~20 issues missing them
- Added effort labels to #153 (l), #168 (m), #166 (xl), #169 (l)

## Existing Issues Enriched

- #153: Added effort/l (synthesis review workflow)
- #168: Added effort/m + Next milestone (profile context packing)
- #166: Added effort/xl (voice notes pillar epic)
- #169: Added effort/l, source/groom (tracking UX)
- #201: Removed legacy type/refactor, added p1, refactor, next, effort/m (triple-write)
- #202: Removed legacy type/refactor, added p2, refactor, next, effort/m (completion coordinator)

## Deferred

- Reading pace coach (pages/day, finish-by date): requires user-provided page count data — deferred until page tracking feature lands
- Recommendations generation (ProfileRecommendations.tsx empty carousels): depends on #168 completion — tracked via #167 pillar
- FSRS-based quiz mode (#106): later backlog, not current focus
- Browser extension (#108): later backlog

## Key Research Findings

1. **Triple-write is the biggest production risk**: Session completion writes to 3 tables non-atomically. `addSynthesizedNote()` is NOT guarded by idempotency check (only transcript/artifact inserts are). A retry after partial completion can orphan notes.

2. **9 API routes completely untested**: `/transcribe`, `/synthesize`, `/upload`, `/audio` routes handle auth, entitlements, error handling with zero test coverage. The Convex layer is tested; the binding layer is not.

3. **Voice notes feature is half-built**: STT gateway landed but synthesis review (#153) is still `next` — AI errors ship directly to notes without user review. Don't market voice notes heavily until #153 ships.

4. **Product is 75% launch-ready**: Core tracking, payments, design all solid. Three blockers: no demo mode, empty onboarding, Stripe webhook secret not automated.

5. **org-level GitHub Projects**: Only "Triage Inbox" exists. "Active Sprint" and "Product Roadmap" projects per org-standards should be created.

## Recommended Execution Order

```
NOW sprint completion:
1. #149 (current branch) — STT gateway
2. #146 — Recording UX on book detail
3. #153 — Synthesis review workflow

NEXT sprint (execute in this order):
4. #212 — STT fallback logging (30 min quick win)
5. #223 — Stripe webhook validation (30 min quick win)
6. #215 — Fix telemetry swallowing (30 min quick win)
7. #201 — Consolidate triple-write (critical safety)
8. #214 — API route tests (p1 coverage)
9. #168 — Profile context from voice notes
10. #217 — Reading momentum on tiles
11. #219 — Currently-reading on public profiles
12. #222 — Profile sharing button
13. #221 — Post-signup onboarding
14. #220 — Demo mode
15. #224 — Analytics funnel
```

## Ready for /autopilot

Quick wins (effort/s, clear scope): #212, #215, #216, #219, #222, #223, #224

```bash
gh issue list --state open --label "effort/s,source/groom" --repo misty-step/bibliomnomnom
```

_Generated by /groom session 2026-02-23_
